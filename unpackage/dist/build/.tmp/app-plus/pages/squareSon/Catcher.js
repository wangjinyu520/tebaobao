(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/squareSon/Catcher"],{"1b8a":function(t,n,i){"use strict";i.r(n);var a=i("e7af"),e=i("31b5");for(var o in e)"default"!==o&&function(t){i.d(n,t,function(){return e[t]})}(o);i("d8b3");var s,u=i("f0c5"),d=Object(u["a"])(e["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);n["default"]=d.exports},"31b5":function(t,n,i){"use strict";i.r(n);var a=i("df86"),e=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(n,t,function(){return a[t]})}(o);n["default"]=e.a},a2f1:function(t,n,i){"use strict";(function(t){i("fdb5"),i("921b");a(i("66fd"));var n=a(i("1b8a"));function a(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,i("6e42")["createPage"])},bb1f:function(t,n,i){},d8b3:function(t,n,i){"use strict";var a=i("bb1f"),e=i.n(a);e.a},df86:function(t,n,i){"use strict";(function(t,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=1,e=1,o={data:function(){return{currIndex:1,dynamicList:[],goodsList:[],loadingType1:0,loadingType2:0,pageShow:!1,storeInfo:{}}},onLoad:function(){this.$loading(),this.getfindgoodsinfor(),this.getDynamicList()},methods:{like:function(t){var n=this;this.$http.like({fid:t}).then(function(i){200==i.status&&(n.$toast(i.mess),"点赞成功"===i.mess?n.dynamicList.map(function(n){return n.id===t&&(n.is_laud=1,n.laudcount=n.laudcount+1),n}):"取消点赞"===i.mess&&n.dynamicList.map(function(n){return n.id===t&&(n.is_laud=0,n.laudcount=n.laudcount-1),n}))})},save:function(n){var a=this;if(!t.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;var e=1===this.dynamicList[n].download,o=this.dynamicList[n].imgurl;this.$loading("正在下载中"),o.forEach(function(t,s){if("gif"===t.substr(-3).toLocaleLowerCase())return a.$toast("gif动态暂时无法下载"),a.$hideLoading(),!1;plus.gallery.save(t,function(){s===o.length-1&&(a.$toast("下载完成"),a.$http.downloadpic({fid:a.dynamicList[n].id}).then(function(t){200===t.status&&(e||a.dynamicList.map(function(t){return t.id===a.dynamicList[n].id&&(t.download=1),t}))}).catch(function(t){i("log",JSON.stringify(t)," at pages\\squareSon\\Catcher.vue:181")})),i("log","save success"," at pages\\squareSon\\Catcher.vue:184")},function(){a.$toast("保存失败")}),a.$hideLoading()})},onShare:function(n,i){var a=this;if(!t.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;var e=this.dynamicList[i];this.$utils.share({summary:e.describe,href:"https://nycs.maitexun.cn/index/apppage/find?id=".concat(n),title:"欢迎体验WoSmart",callBack:function(){a.$http.sharewxpy({fid:n}).then(function(t){200===t.status&&(a.dynamicList.map(function(t){return t.id===n&&1!==t.is_share&&(t.sharecount=t.sharecount+1,t.is_share=1),t}),a.$toast("分享成功"))})}})},getfindgoodsinfor:function(){var t=this;this.$http.getfindgoodsinfor({mid:this.$mp.query.mid}).then(function(n){200===n.status&&(t.storeInfo=n.data)})},gettab:function(t){this.currIndex=t,1===this.index?this.getDynamicList():this.getfindgoods()},clickFollow:function(n){var i=this;if(!t.getStorageSync("token"))return this.getnav("/pages/login/loginSon"),!1;this.$http.getfollow({mid:n}).then(function(t){200==t.status&&(i.$toast(t.mess),"关注成功"===t.mess?i.dynamicList.map(function(t){return t.mid===n&&(t.is_follow=1),t}):"取消关注"===t.mess&&i.dynamicList.map(function(t){return t.mid===n&&(t.is_follow=0),t}))})},getDynamicList:function(){var t=this;if(2===this.loadingType1)return!1;this.loadingType1=1,this.$http.getsquareList({page:a,size:5,mid:this.$mp.query.mid}).then(function(n){if(t.pageShow||(t.pageShow=!0),200===n.status){if(!n.data.data.length)return t.loadingType1=2,!1;t.statusMath(t),t.dynamicList=t.dynamicList.concat(n.data.data),t.loadingType1=0,a+=1}})},getfindgoods:function(){var t=this;if(2===this.loadingType2)return!1;this.loadingType2=2,this.$http.getfindgoods({page:e,size:5,mid:this.$mp.query.mid}).then(function(n){if(t.pageShow||(t.pageShow=!0),200===n.status){if(!n.data.data.length)return t.loadingType2=2,!1;t.statusMath(t),t.goodsList=t.goodsList.concat(n.data.data),t.loadingType2=0,e+=1}})},preview:function(n,i){t.previewImage({current:i,indicator:"number",urls:n})}},onReachBottom:function(){1===this.currIndex?this.getDynamicList():this.getfindgoods()},destroyed:function(){a=1,e=1}};n.default=o}).call(this,i("6e42")["default"],i("0de9")["default"])},e7af:function(t,n,i){"use strict";var a,e=function(){var t=this,n=t.$createElement;t._self._c},o=[];i.d(n,"b",function(){return e}),i.d(n,"c",function(){return o}),i.d(n,"a",function(){return a})}},[["a2f1","common/runtime","common/vendor"]]]);