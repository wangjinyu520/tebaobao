(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/homeSon/allOrder"],{"403c":function(t,n,e){"use strict";e.r(n);var o=e("cc3f"),i=e("9ba4");for(var s in i)"default"!==s&&function(t){e.d(n,t,function(){return i[t]})}(s);e("9009");var r,a=e("f0c5"),c=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);n["default"]=c.exports},9009:function(t,n,e){"use strict";var o=e("9071"),i=e.n(o);i.a},9071:function(t,n,e){},"9ba4":function(t,n,e){"use strict";e.r(n);var o=e("b48f"),i=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(n,t,function(){return o[t]})}(s);n["default"]=i.a},b48f:function(t,n,e){"use strict";(function(t,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(e("a34a"));function s(t){return t&&t.__esModule?t:{default:t}}function r(t,n,e,o,i,s,r){try{var a=t[s](r),c=a.value}catch(u){return void e(u)}a.done?n(c):Promise.resolve(c).then(o,i)}function a(t){return function(){var n=this,e=arguments;return new Promise(function(o,i){var s=t.apply(n,e);function a(t){r(s,o,i,a,c,"next",t)}function c(t){r(s,o,i,a,c,"throw",t)}a(void 0)})}}var c=[],u=[],l=[],h="",f="",d=function(){return Promise.all([e.e("common/vendor"),e.e("node-modules/mescroll-uni/mescroll-uni")]).then(e.bind(null,"0c5f"))},p=function(){return e.e("components/uni-popup").then(e.bind(null,"9cab"))},m=function(){return e.e("components/txpwd").then(e.bind(null,"148c"))},g={components:{uniPopup:p,txpwd:m,MescrollUni:d},onLoad:function(n){var e=this;n&&(this.showingIndex1=n.index?n.index:6,f=n.backindex),c=[],t.getProvider({service:"payment",success:function(t){o("log","payment success:"+JSON.stringify(t)," at pages\\homeSon\\allOrder.vue:136"),t.provider.map(function(t){switch(t){case"alipay":c.push({name:"支付宝",id:t,loading:!1});break;case"wxpay":c.push({name:"微信",id:t,loading:!1});break;default:break}})},fail:function(t){e.$toast("获取登录通道失败：".concat(t))}})},onShow:function(){this.list=[],this.mescroll&&this.mescroll.resetUpScroll()},data:function(){return{showingIndex1:6,list:[],valShow:!1,numberpay:!1,valueStatus:0,mescroll:null,upOption:{page:{num:0,size:10},noMoreSize:4,empty:{tip:"~ 暂无数据 ~",btnText:"去看看"}}}},watch:{valShow:function(){this.statusMath(this)}},onReachBottom:function(){this.mescroll&&this.mescroll.onReachBottom()},onPageScroll:function(t){this.mescroll&&this.mescroll.onPageScroll(t)},onBackPress:function(){if(2==f)return t.switchTab({url:"/pages/tabBar/Cart"}),!0},methods:{toPt:function(t){this.getnav("/pages/homeSon/fightGroup?order_num=".concat(t))},mescrollInit:function(t){this.mescroll=t},downCallback:function(t){t.resetUpScroll()},upCallback:function(t){var n=this,e=t.num,o=t.size;this.$http.getMyOrder({filter:this.showingIndex1,page:e}).then(function(t){200==t.status&&(t.data.forEach(function(t){t.icon=!1}),n.mescroll.endByPage(t.data.length,Math.ceil(Number(t.data.length)/o)),1==e&&(n.list=[]),n.list=n.list.concat(t.data))}).catch(function(t){n.mescroll.endErr()})},emptyClick:function(){this.getnav("/pages/homeSon/classification")},getbacktel:function(){2==f?t.switchTab({url:"/pages/tabBar/Cart"}):this.getback()},showOptions:function(t){if(this.showingIndex1==t)return!1;this.showingIndex1=t,this.list=[],this.mescroll.resetUpScroll(),this.numberpay=!1},cancellation:function(t){var n=this;this.$showModal({content:"确认取消订单吗？"}).then(function(e){e.confirm&&(l=[],n.$loading(),n.$http.getMyOrderquxiao({order_num:t}).then(function(t){200==t.status&&(n.$toast(t.mess),n.list=[],n.mescroll.resetUpScroll())}))})},orderInfo:function(t,n){var e=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s={order_nums:n,zf_type:t};return new Promise(function(t){e.$http.getzhifuorder(s).then(function(n){200==n.status?e.$http.getzhifu({order_number:n.data.order_number,zf_type:n.data.zf_type,pay_password:i}).then(function(n){o("log",JSON.stringify(n),"999999"," at pages\\homeSon\\allOrder.vue:314"),t(n)}):e.$toast(n.mess)})})},getpay:function(){var n=a(i.default.mark(function n(e){var s,r,a=this;return i.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(s="",r="",1!=e){n.next=9;break}return r=c[0].id,n.next=6,this.orderInfo(1,h);case 6:s=n.sent,n.next=18;break;case 9:if(2!=e){n.next=16;break}return r=c[1].id,n.next=13,this.orderInfo(2,h);case 13:s=n.sent,n.next=18;break;case 16:return this.$http.getpdpaypwd().then(function(t){200==t.status&&(0==t.data.zhifupwd?(a.$toast("请先设置支付密码"),setTimeout(function(){a.getnav("/pages/personalSon/setupZfpwd")},1e3)):(a.$refs.popupRef.close(),a.valShow=!0))}),n.abrupt("return",!1);case 18:t.requestPayment({provider:r,orderInfo:s.data.wxpayinfos,success:function(n){t.showToast({title:"感谢您的赞助!"})},fail:function(n){o("log","fail",n," at pages\\homeSon\\allOrder.vue:376"),t.showModal({content:"支付失败,原因为: "+n.errMsg,showCancel:!1})},complete:function(){a.$refs.popupRef.close(),a.showOptions(1)}});case 19:case"end":return n.stop()}},n,this)}));function e(t){return n.apply(this,arguments)}return e}(),codeShow:function(){var t=a(i.default.mark(function t(n){var e,s=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.valShow=n.backHied,o("log",n," at pages\\homeSon\\allOrder.vue:393"),this.$loading(),t.next=5,this.orderInfo(3,h,n.cord);case 5:e=t.sent,200==e.status?(this.$toast(e.mess),setTimeout(function(){s.showOptions(2)})):this.showOptions(1);case 7:case"end":return t.stop()}},t,this)}));function n(n){return t.apply(this,arguments)}return n}(),hideAl:function(){this.valShow=!1},clickPay:function(t){this.$refs.popupRef.show(),u.includes(t)||u.push(t),h=u},checkpay:function(t,n){for(var e=0;e<this.list.length;e++)t==this.list[e].id&&(this.list[e].icon=!this.list[e].icon,this.list[e].icon?(this.numberpay=!0,l.includes(n)||l.push(n)):l.includes(n)&&l.splice(l.indexOf(n),1));0==l.length&&(this.numberpay=!1)},hebingpay:function(){this.$refs.popupRef.show(),h=l},deleteOrder:function(t){var n=this;this.$showModal({content:"确认删除订单？"}).then(function(e){e.confirm&&(n.$loading(),n.$http.getdelorder({order_num:t}).then(function(t){200==t.status&&(n.$toast(t.mess),n.list=[],n.mescroll.resetUpScroll())}))})},getqrshouhuo:function(t){var n=this;this.$showModal({content:"确认收货吗?"}).then(function(e){e.confirm&&(n.$loading(),n.$http.getqrshouhuo({order_num:t}).then(function(t){200==t.status&&(n.$toast(t.mess),n.list=[],n.mescroll.resetUpScroll())}))})}}};n.default=g}).call(this,e("6e42")["default"],e("0de9")["default"])},cc3f:function(t,n,e){"use strict";var o,i=function(){var t=this,n=t.$createElement;t._self._c},s=[];e.d(n,"b",function(){return i}),e.d(n,"c",function(){return s}),e.d(n,"a",function(){return o})},d85d:function(t,n,e){"use strict";(function(t){e("fdb5"),e("921b");o(e("66fd"));var n=o(e("403c"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("6e42")["createPage"])}},[["d85d","common/runtime","common/vendor"]]]);