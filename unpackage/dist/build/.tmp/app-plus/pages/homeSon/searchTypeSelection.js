(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/homeSon/searchTypeSelection"],{"2ce3":function(t,e,i){"use strict";var s=i("3be0"),a=i.n(s);a.a},"3be0":function(t,e,i){},"46c8":function(t,e,i){"use strict";i.r(e);var s=i("fa73"),a=i("baef");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("2ce3");var n,r=i("f0c5"),h=Object(r["a"])(a["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],n);e["default"]=h.exports},"61d26":function(t,e,i){"use strict";(function(t){i("fdb5"),i("921b");s(i("66fd"));var e=s(i("46c8"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},b3c5:function(t,e,i){"use strict";(function(t){function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){a(t,e,i[e])})}return t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return i.e("components/uni-drawer").then(i.bind(null,"d93a"))},n=i("b6d7"),r=1,h="",c={components:{uniDrawer:o},data:function(){return{showingIndex1:1,orderIndex:0,pageShow:!1,loadingStatus:0,sortType:"",filteList:[],currValue:0,filteAl:0,indexid:0,cateId:"",goodsList:[],rightDrawerVisible:!1,shop:[{check:!0,str:"全部商品"},{check:!1,str:"自营商品"},{check:!1,str:"活动商品"}],low_price:"",max_price:"",isShow:[],searchData:{},valueStatus:0}},onLoad:function(t){r=1,this.$loading(),this.searchData=JSON.parse(t.searchObj),this.getGoodsList({page:r,keyword_name:this.searchData.keyword_name})},onPageScroll:function(t){n.load(t.scrollTop,this)},watch:{rightDrawerVisible:function(){this.statusMath(this)}},methods:{rightDrawerLoad:function(){r=1,this.$loading(),this.loadingStatus=0,this.shop.forEach(function(t,e){t.check=!1,0==e&&(t.check=!0)}),this.getGoodsList({page:r,cate_id:this.cateId,keyword_name:this.searchData.keyword_name})},navSearch:function(){var t={keyword_name:this.searchData.keyword_name,type:2};this.getnav("/pages/homeSon/theShop?searchObj="+JSON.stringify(t))},searchlocal:function(){r=1,this.loadingStatus=0,this.showingIndex1=1,this.getGoodsList({page:r,keyword_name:this.searchData.keyword_name})},closeRightDrawer:function(){this.rightDrawerVisible=!1},showRightDrawer:function(){this.rightDrawerVisible=!0},getGoodsList:function(e){var i=this;this.$http.getsearchgoods(e).then(function(e){200===e.status?(i.pageShow=!0,i.goodsList=e.data.goodres,i.filteList=e.data.shaixuan.map(function(e){return e.height=t.upx2px(150)+"px",e.active=null,e}),n.load(500,i),i.statusMath(i)):i.$toast(e.mess)})},showOptions:function(e,i){var s=this;return""==this.searchData.keyword_name?(this.$toast("请输入筛选关键字"),!1):(3===e||this.showingIndex1!==e)&&(this.sortType=i,this.loadingStatus=0,3===e&&(1===this.filteAl?this.filteAl=2:this.filteAl=1),3!==e&&(this.filteAl=0),this.showingIndex1=e,r=1,this.$loading(),void this.$http.getsearchgoods({page:1,keyword_name:this.searchData.keyword_name,sort:3===e?this.sortOrder():this.sortType}).then(function(e){200===e.status?(s.goodsList=e.data.goodres,s.loadingStatus=0):(s.goodsList=[],s.loadingStatus=2,s.$toast(e.mess)),t.pageScrollTo({scrollTop:0,duration:0})}))},showOptions4:function(){this.showRightDrawer()},sortOrder:function(t){return 1===this.filteAl?"low_height":"height_low"},changeOrder:function(t){var e=t.target.dataset.itemid;this.orderIndex=e,this.showingIndex1=0},clickActive:function(t){this.indexid=t},getHeight:function(e){this.filteList.forEach(function(i){if(i.id==e){var s=Math.ceil(i.attr_values.length/3);if(i.attr_values.length<=6)return!1;if(i.height==t.upx2px(150)+"px"){var a=t.createSelectorQuery().select(".type-list");a.fields({size:!0,scrollOffset:!0},function(t){i.height=(Number(t.height)+15)*s+"px"}).exec()}else i.height=t.upx2px(150)+"px"}})},getId:function(t,e,i){this.filteList.forEach(function(e,s){if(t==e.id)for(var a=0;a<=e.attr_values.length-1;a++)i==e.attr_values[a]&&(e.active=e.attr_values[a])})},completeSearch:function(){var t=this;if(""==this.searchData.keyword_name)return this.$toast("请输入筛选关键字"),!1;var e=[];this.filteList.forEach(function(t){t.active&&e.push(t.id+":"+t.active)});var i={goods_type:h,low_price:this.low_price,max_price:this.max_price,goods_attr:e.join(",")};if(r=1,this.loadingStatus=0,0!==this.loadingStatus)return!1;this.loadingStatus=1,this.goodsList=[],this.$loading(),this.$http.getsearchgoods(s({page:r,keyword_name:this.searchData.keyword_name,sort:3===this.showingIndex1?this.sortOrder():this.sortType},i)).then(function(e){200===e.status?(t.goodsList=e.data.goodres,t.loadingStatus=0):300===e.status?t.loadingStatus=2:t.$toast(e.mess),t.rightDrawerVisible=!1}).catch(function(){t.loadingStatus=0})},getCheck:function(t){this.shop.forEach(function(e,i){e.check=!1,t==i&&(e.check=!0,h=e.str)})}},onReachBottom:function(){var t=this;if(0!==this.loadingStatus)return!1;this.loadingStatus=1,this.$http.getsearchgoods({page:r+1,keyword_name:this.searchData.keyword_name,sort:3===this.showingIndex1?this.sortOrder():this.sortType}).then(function(e){if(200===e.status){if(0==e.data.goodres.length)return t.loadingStatus=2,!1;n.load(500,t),t.goodsList=t.goodsList.concat(e.data.goodres),t.loadingStatus=0,r+=1}else t.$toast(e.mess)}).catch(function(){t.loadingStatus=0})}};e.default=c}).call(this,i("6e42")["default"])},baef:function(t,e,i){"use strict";i.r(e);var s=i("b3c5"),a=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);e["default"]=a.a},fa73:function(t,e,i){"use strict";var s,a=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return s})}},[["61d26","common/runtime","common/vendor"]]]);