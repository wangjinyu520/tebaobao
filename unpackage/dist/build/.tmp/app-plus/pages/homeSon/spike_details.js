(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/homeSon/spike_details"],{4676:function(t,o,n){"use strict";n.r(o);var i=n("ba57"),e=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(o,t,function(){return i[t]})}(s);o["default"]=e.a},"83e1":function(t,o,n){"use strict";var i=n("d30d"),e=n.n(i);e.a},a221:function(t,o,n){"use strict";n.r(o);var i=n("a4d5"),e=n("4676");for(var s in e)"default"!==s&&function(t){n.d(o,t,function(){return e[t]})}(s);n("83e1");var u,a=n("f0c5"),r=Object(a["a"])(e["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],u);o["default"]=r.exports},a4d5:function(t,o,n){"use strict";var i,e=function(){var t=this,o=t.$createElement;t._self._c;t._isMounted||(t.e0=function(o){t.showPopupBottom=!1},t.e1=function(o){t.showPopupBottom=!1},t.e2=function(o){t.showPopupBottom=!1})},s=[];n.d(o,"b",function(){return e}),n.d(o,"c",function(){return s}),n.d(o,"a",function(){return i})},ba57:function(t,o,n){"use strict";(function(t,i){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=s(n("a34a"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,o,n,i,e,s,u){try{var a=t[s](u),r=a.value}catch(c){return void n(c)}a.done?o(r):Promise.resolve(r).then(i,e)}function a(t){return function(){var o=this,n=arguments;return new Promise(function(i,e){var s=t.apply(o,n);function a(t){u(s,i,e,a,r,"next",t)}function r(t){u(s,i,e,a,r,"throw",t)}a(void 0)})}}var r=function(){return n.e("components/uni-number-box").then(n.bind(null,"6adc"))},c=function(){return n.e("graceUI/components/graceSwiper").then(n.bind(null,"fa4a"))},d=function(){return n.e("components/uni-countdown").then(n.bind(null,"0b3c"))},h=function(){return n.e("components/uni-popup").then(n.bind(null,"9cab"))},f=null,p="",l=[],g=(new Date,{onLoad:function(o){f=o.id,this.goodsId=o.id,this.rush_id=o.rush_id,t("log",o," at pages\\homeSon\\spike_details.vue:297"),this.userCartNum=this.$store.state.userCartNum},data:function(){return{heightImg:"330px",userCartNum:0,swiperItems:[],product:{},shopinfos:{},remgoodres:{},couponinfos:{},huodong:{},sertions:{},radioattr:{},getcouponlst:[],huodonginfo:{},serlst:[],goodsId:null,rush_id:null,activity_info:{},active:1,attrIsShow:!1,proNumber:0,buyNum:1,activity_time:{hour:0,minute:0,second:10},showPopupBottom:!1,PopupIndex:0,skeleton:"show",valueStatus:0}},watch:{showPopupBottom:function(){this.statusMath(this)},attrIsShow:function(){this.statusMath(this)}},mounted:function(){},onShow:function(){this.getrushgoodinfo(),l=[]},methods:{settitle:function(){this.$toast("设置提醒成功")},hidePopup:function(){this.showPopupBottom=!1},coupon:function(){var t=a(e.default.mark(function t(o){var n,i=this;return e.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getIsLogin();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return",!1);case 5:this.PopupIndex=o,this.showPopupBottom=!0,1===this.PopupIndex&&(this.$loading(),this.$http.getcouponlst({shop_id:this.product.shop_id}).then(function(t){200==t.status&&(i.getcouponlst=t.data)})),2===this.PopupIndex&&(this.$loading(),this.$http.gethuodonginfo({shop_id:this.product.shop_id,goods_id:f,prom_id:this.huodong.prom_id}).then(function(t){200==t.status&&(i.huodonginfo=t.data)})),3===this.PopupIndex&&(this.$loading(),this.$http.getserlst({shop_id:this.product.shop_id,goods_id:f}).then(function(t){200==t.status&&(i.serlst=t.data)}));case 10:case"end":return t.stop()}},t,this)}));function o(o){return t.apply(this,arguments)}return o}(),Receive:function(t){var o=this;this.$loading(),this.$http.getcoupons({coupon_id:t,shop_id:this.product.shop_id}).then(function(n){200==n.status&&(o.$toast(n.mess),o.getcouponlst.forEach(function(o){o.id==t&&(o.have=1)}))})},getrushgoodinfo:function(){var o=this;this.$loading(),this.$http.getrushgoodinfo({goods_id:f,rush_id:this.rush_id}).then(function(n){if(200==n.status){o.swiperItems=n.data.gpres,o.product=n.data.goodsinfo,o.shopinfos=n.data.shopinfos,o.couponinfos=n.data.couponinfos,o.huodong=n.data.huodong,o.sertions=n.data.sertions,o.radioattr=n.data.radioattr,o.proNumber=n.data.pronum,o.activity_info=n.data.activity_info,o.remgoodres=n.data.remgoodres;var e=Number(o.activity_info.end_time)-Number(o.activity_info.dqtime),s=o.$formatSeconds(e).split("-");o.activity_time={day:parseInt(s[0]/24),hour:s[0]%24,minute:s[1],second:s[2]},setTimeout(function(){var n=i.createSelectorQuery().select(".image_height");n.fields({size:!0,scrollOffset:!0},function(n){t("log",n," at pages\\homeSon\\spike_details.vue:442"),n&&n.height>330&&(o.heightImg=n.height+"px")}).exec()},200),setTimeout(function(){o.skeleton="hide"},200),o.statusMath(o)}})},showInfo:function(t){this.active=t},buyNow:function(t){this.attrIsShow=!0,p=t},attrSubmit:function(t){var o=this,n=this.getIsLogin();if(!n)return!1;var i={goods_id:f,goods_attr:l.join(","),num:this.buyNum};p?this.$http.getaddcart(i).then(function(t){200==t.status&&(o.$toast(t.mess),o.attrIsShow=!1)}):this.$http.getpurbuy(i).then(function(t){200==t.status&&o.getnav("/pages/homeSon/ConfirmationOrder?pur_id="+t.data.pur_id+"&type=1")})},closeAttr:function(){this.attrIsShow=!1},typeChange:function(o,n){var i=this,e=this.radioattr;for(var s in l=[],e)if(n==s)for(var u=0;u<e[s].length;u++)e[s][u].attr_value==o?e[s][u].check="true":e[s][u].check="false";for(var a in e)for(u=0;u<e[a].length;u++)"true"==e[a][u].check&&l.push("".concat(e[a][u].id));t("log",l," at pages\\homeSon\\spike_details.vue:526"),Object.keys(e).length==l.length&&this.$http.getgoodsPrice({goods_attr:l.join(","),goods_id:f}).then(function(t){200==t.status&&(i.proNumber=t.data.attrinfos.goods_number,i.activity_info=Array.isArray(t.data.activity_info)?{}:t.data.activity_info,i.buyNum=1,i.product.is_activity=t.data.attrinfos.is_activity,i.product.goods_name=t.data.attrinfos.goods_name,i.product.zs_shop_price=t.data.attrinfos.zs_shop_price,i.product.thumb_url=t.data.attrinfos.attr_pic?t.data.attrinfos.attr_pic:i.product.thumb_url)}),this.radioattr=this.radioattr},buyNumChange:function(t,o){this.buyNum=t},securities:function(){i.navigateTo({url:"/pages/subPage/Coupon"})},timeuptime:function(){this.$toast("秒杀结束"),this.getgoodsinfoList(),l=[]},getTab:function(t){i.switchTab({url:t})},getIsLogin:function(){return!!i.getStorageSync("token")||(i.redirectTo({url:"/pages/loginSon/login?islogin=0"}),!1)},home:function(){var t=a(e.default.mark(function t(){var o,n=this;return e.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getIsLogin();case 2:if(o=t.sent,o){t.next=5;break}return t.abrupt("return",!1);case 5:1==this.product.coll_goods?(this.$loading(),this.$http.getcancelcoll({goods_id:f}).then(function(t){200==t.status&&(n.$toast(t.mess),n.product.coll_goods=0)})):(this.$loading(),this.$http.getcoll({goods_id:f}).then(function(t){200==t.status&&(n.$toast(t.mess),n.product.coll_goods=1)}));case 6:case"end":return t.stop()}},t,this)}));function o(){return t.apply(this,arguments)}return o}()},components:{graceSwiper:c,uniNumberBox:r,uniCountdown:d,uniPopup:h}});o.default=g}).call(this,n("0de9")["default"],n("6e42")["default"])},d30d:function(t,o,n){},f039:function(t,o,n){"use strict";(function(t){n("fdb5"),n("921b");i(n("66fd"));var o=i(n("a221"));function i(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,n("6e42")["createPage"])}},[["f039","common/runtime","common/vendor"]]]);