(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/Square"],{"545d":function(t,a,n){},"71a4":function(t,a,n){"use strict";n.r(a);var e=n("be99"),i=n("c10a");for(var s in i)"default"!==s&&function(t){n.d(a,t,function(){return i[t]})}(s);n("aa14");var o,u=n("f0c5"),r=Object(u["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],o);a["default"]=r.exports},"77f3":function(t,a,n){"use strict";(function(t,n){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={size:"5",page:1},i={data:function(){return{indexId1:1,squareLiData:[],fxListDate:[],page1:1,page2:1,loadingType1:0,loadingType2:0,hottalk:"",valueStatus:0}},created:function(){this.squareList(e),this.gethottalk()},onReachBottom:function(){this.loadMoreFunc()},onPullDownRefresh:function(){var t=this;this.page1=1,this.page2=1,1==this.indexId1&&this.$nextTick(function(){t.squareList({size:"5",page:1},!0),t.gethottalk()})},methods:{send:function(){if(!t.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;this.getnav("/pages/squareSon/Release")},save:function(a){var e=this;if(!t.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;var i=1===this.indexId1?"squareLiData":"fxListDate",s=1===this[i][a].download,o=this[i][a].imgurl;this.$loading("正在下载中"),o.forEach(function(t,u){if("gif"===t.substr(-3).toLocaleLowerCase())return e.$toast("gif动态暂时无法下载"),e.$hideLoading(),!1;plus.gallery.save(t,function(){u===o.length-1&&(e.$toast("下载完成"),e.$http.downloadpic({fid:e[i][a].id}).then(function(t){200===t.status&&(s||e[i].map(function(t){return t.id===e[i][a].id&&(t.download=t.download+1,t.is_download=t.is_download+1),t}))}).catch(function(t){n("log",JSON.stringify(t)," at pages\\tabBar\\Square.vue:229")})),n("log","save success"," at pages\\tabBar\\Square.vue:232")},function(){e.$toast("保存失败")}),e.$hideLoading()})},like:function(a,n){var e=this;if(!t.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;var i=1===this.indexId1?"squareLiData":"fxListDate";this.$http.like({fid:a}).then(function(t){200==t.status&&(e.$toast(t.mess),"点赞成功"===t.mess?e[i].map(function(t){return t.id===a&&(t.is_laud=1,t.laudcount=t.laudcount+1),t}):"取消点赞"===t.mess&&e[i].map(function(t){return t.id===a&&(t.is_laud=0,t.laudcount=t.laudcount-1),t}))})},onShare:function(a,n){var e=this;if(!t.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;var i=1===this.indexId1?"squareLiData":"fxListDate",s=this[i][n];this.$utils.share({summary:s.describe,href:"https://nycs.maitexun.cn/index/apppage/find?id=".concat(a),title:"欢迎体验WoSmart",callBack:function(){e.$http.sharewxpy({fid:a}).then(function(t){200===t.status&&e[i].map(function(t){return t.id===a&&1!==t.is_share&&(t.sharecount=t.sharecount+1,t.is_share=1),t})})}})},clickFollow:function(a){var n=this;if(!t.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;this.$http.getfollow({mid:a}).then(function(t){200==t.status&&(n.$toast(t.mess),"关注成功"===t.mess?n.squareLiData.map(function(t){return t.mid===a&&(t.is_follow=1),t}):"取消关注"===t.mess&&n.squareLiData.map(function(t){return t.mid===a&&(t.is_follow=0),t}))})},tabActive:function(a){if(2===a&&!t.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;this.indexId1=a,1==this.indexId1&&(e.page=this.page1,this.squareList(e)),2==this.indexId1&&(e.type=1,e.page=this.page2,this.squareList(e))},squareList:function(t,a){var n=this;2==this.indexId1?t.type=1:t.type="",(1==this.page1&&1==this.indexId1||1==this.page2&&2==this.indexId1)&&this.$loading(),this.$http.getsquareList(t).then(function(t){if(200===t.status){if(n.$hideLoading(),a)return n.squareLiData=t.data.data,n.loadingType1=0,!1;if(0==t.data.data.length&&1==n.indexId1)return n.loadingType1=2,!1;if(0==t.data.data.length&&2==n.indexId1)return n.loadingType2=2,!1;1==n.indexId1&&(n.squareLiData=n.squareLiData.concat(t.data.data),n.loadingType1=0),2==n.indexId1&&(n.fxListDate=n.fxListDate.concat(t.data.data),n.loadingType2=0)}}).catch(function(){})},loadMoreFunc:function(){var t=this;if(1==this.indexId1){if(1==this.loadingType1||2==this.loadingType1)return!1;this.loadingType1=1,++this.page1,e.page=this.page1}if(2==this.indexId1){if(1==this.loadingType2||2==this.loadingType2)return!1;this.loadingType2=1,++this.page2,e.page=this.page2}this.$nextTick(function(){t.squareList(e)})},preview:function(a,n){t.previewImage({current:n,indicator:"number",urls:a})},gethottalk:function(){var a=this;this.$http.gethottalk().then(function(n){t.stopPullDownRefresh(),200==n.status&&(a.hottalk=n.data.data)}).catch(function(){t.stopPullDownRefresh()})}},onNavigationBarButtonTap:function(t){this.getnav("/pages/squareSon/Release")}};a.default=i}).call(this,n("6e42")["default"],n("0de9")["default"])},aa14:function(t,a,n){"use strict";var e=n("545d"),i=n.n(e);i.a},b527:function(t,a,n){"use strict";(function(t){n("fdb5"),n("921b");e(n("66fd"));var a=e(n("71a4"));function e(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,n("6e42")["createPage"])},be99:function(t,a,n){"use strict";var e,i=function(){var t=this,a=t.$createElement;t._self._c},s=[];n.d(a,"b",function(){return i}),n.d(a,"c",function(){return s}),n.d(a,"a",function(){return e})},c10a:function(t,a,n){"use strict";n.r(a);var e=n("77f3"),i=n.n(e);for(var s in e)"default"!==s&&function(t){n.d(a,t,function(){return e[t]})}(s);a["default"]=i.a}},[["b527","common/runtime","common/vendor"]]]);