<view class="grace-padding index_class"><view class="cart-scoll"><block wx:for="{{cartlist}}" wx:for-item="itemList" wx:for-index="keys" wx:key="keys"><view class="grace_class"><view class="cart_top" style="padding-left:22rpx;"><view class="cart_title"><view data-event-opts="{{[['tap',[['getShop',[keys]]]]]}}" class="{{['iconfont  _i',itemList.icon?'icon_e632':'icon_e741']}}" style="padding-left:0;" bindtap="__e"></view><view class="iconfont icon_e79f _i"></view><text data-event-opts="{{[['tap',[['getnav',['/pages/homeSon/storeDetails?shop_id='+itemList.goodres[0].shop_id]]]]]}}" catchtap="__e">{{itemList.goodres[0].shop_name}}</text></view><block wx:if="{{itemList.couponinfos.is_show===1}}"><text data-event-opts="{{[['tap',[['copyjuan',['$0'],[[['cartlist','',keys,'goodres.__$n0.shop_id']]]]]]]}}" bindtap="__e">领劵</text></block><block wx:else><view class="iconfont icon_e60c _i"></view></block></view><block wx:for="{{itemList.goodres}}" wx:for-item="cart" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['getnav',['/pages/homeSon/shop_details?id='+cart.goods_id]]]]]}}" class="grace-shoppingcard" catchtap="__e"><view class="goods"><view data-event-opts="{{[['tap',[['isSelection',['$0','$1'],[[['cartlist','',keys],['goodres','',index,'id']],[['cartlist','',keys],['goodres','',index,'shop_id']]]]]]]}}" class="{{['iconfont  _i',cart.icon?'icon_e632':'icon_e741']}}" style="padding-left:0;" catchtap="__e"></view><image src="{{cart.thumb_url}}"></image><view class="desc"><view class="goods-title grace-columns"><text class="to_name">{{cart.goods_name}}</text><text class="to_text">{{cart.goods_attr_str}}</text></view><block wx:if="{{cart.is_activity!==0}}"><view class="goods-title grace-columns"><view class="to_text">{{"活动结束还剩"+cart.sytime}}</view><block wx:if="{{cart.is_activity==1}}"><view class="to_text">{{'限购'+cart.xznum+"件"}}</view></block></view></block><view class="goods-price"><text class="color">{{"￥"+cart.shop_price}}</text><view class="goods-number"><uni-number-box vue-id="{{'1-'+keys+'-'+index}}" index="{{index}}" value="{{cart.num}}" idcode="{{cart.id}}" min="{{1}}" max="{{cart.is_activity==1?cart.xznum:10000}}" data-event-opts="{{[['^change',[['numberChange']]]]}}" bind:change="__e" bind:__l="__l"></uni-number-box></view></view></view></view></view></block><view class="grace_discount"><block wx:if="{{itemList.couponinfos.is_show==1}}"><view><text class="infos_name">优惠券</text><text>{{itemList.couponinfos.infos}}</text></view></block><block wx:if="{{itemList.promotions.is_show==1}}"><view class="grace-disp"><text class="infos_name">活动</text><view class="infos_list"><block wx:for="{{itemList.promotions.infos}}" wx:for-item="time" wx:for-index="is_key" wx:key="is_key"><text>{{time}}</text></block></view></view></block></view></view></block><block wx:if="{{cartlist.length==0&&!isLoading}}"><view class="depot"><image class="img" src="../../static/images/img/cartinfo.png"></image><view class="tps">您的购物车空空如也~</view><view data-event-opts="{{[['tap',[['getnav',['/pages/homeSon/classification']]]]]}}" class="stroll" bindtap="__e">到处逛逛</view></view></block><load-more vue-id="2" loadingType="{{loadingType}}" bind:__l="__l"></load-more></view><block wx:if="{{cartlist.length}}"><view class="grace-footer" style="padding-left:22rpx;"><view data-event-opts="{{[['tap',[['allElection',['$event']]]]]}}" class="{{['iconfont  _i',allEle?'icon_e632':'icon_e741']}}" style="padding-left:0;" bindtap="__e"></view>全选<view hidden="{{!(editId==false)}}" style="width:40%;line-height:90rpx;text-indent:1em;">总计<text class="color" style="font-size:36rpx;">{{"￥"+(totalprice?totalprice:0)}}</text></view><view hidden="{{!(editId==true)}}" style="width:40%;line-height:90rpx;text-indent:1em;"></view><view style="width:40%;border:0;"><block wx:if="{{editId==false}}"><button class="clickBgc" style="border:0;" type="warn" data-event-opts="{{[['tap',[['checkout',['$event']]]]]}}" bindtap="__e">立即结算</button></block><block wx:else><button class="clickBgc" style="border:0;" type="warn" data-event-opts="{{[['tap',[['delect',['$event']]]]]}}" bindtap="__e">删除</button></block></view></view></block><popup-layer class="vue-ref" vue-id="3" direction="top" data-ref="popupRef" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-coupon"><view class="popup-title">优惠</view><view class="coupon-list"><block wx:for="{{getcouponlst}}" wx:for-item="getcouponlstList" wx:for-index="getcouponlstKey" wx:key="getcouponlstKey"><view class="items"><view class="coupon-left"><view>￥<text>{{getcouponlstList.dec_price}}</text>店铺优惠券</view><text>{{"满"+getcouponlstList.man_price+"使用"}}</text><text>{{"有限期"+getcouponlstList.start_time+"-"+getcouponlstList.end_time}}</text></view><view class="coupon-right"><block wx:if="{{getcouponlstList.have==0}}"><text data-event-opts="{{[['tap',[['Receive',['$0'],[[['getcouponlst','',getcouponlstKey,'id']]]]]]]}}" bindtap="__e">立即领取</text></block><block wx:if="{{getcouponlstList.have==1}}"><text style="background:#999;">已领取</text></block></view></view></block></view><view class="popup-com"><button data-event-opts="{{[['tap',[['hidePopup',['$event']]]]]}}" bindtap="__e">关闭</button></view></view></popup-layer><login vue-id="4" islogin="{{islogin}}" bind:__l="__l"></login></view>