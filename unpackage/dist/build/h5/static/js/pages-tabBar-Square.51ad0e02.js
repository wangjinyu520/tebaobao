(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tabBar-Square"],{"169f":function(t,i,a){var n=a("71e1");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var e=a("4f06").default;e("c97124cc",n,!0,{sourceMap:!1,shadowMode:!1})},"71a4":function(t,i,a){"use strict";a.r(i);var n=a("b050d"),e=a("c10a");for(var s in e)"default"!==s&&function(t){a.d(i,t,function(){return e[t]})}(s);a("d151");var o,c=a("f0c5"),l=Object(c["a"])(e["default"],n["b"],n["c"],!1,null,"27d21076",null,!1,n["a"],o);i["default"]=l.exports},"71e1":function(t,i,a){i=t.exports=a("2350")(!1),i.push([t.i,".download-active[data-v-27d21076]{color:#fa3f3f!important}",""])},7997:function(t,i,a){"use strict";var n=a("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=n(a("f499"));a("ac6a");var s={size:"5",page:1},o={data:function(){return{indexId1:1,squareLiData:[],fxListDate:[],page1:1,page2:1,loadingType1:0,loadingType2:0,hottalk:"",valueStatus:0}},created:function(){this.squareList(s),this.gethottalk()},onReachBottom:function(){this.loadMoreFunc()},onPullDownRefresh:function(){var t=this;this.page1=1,this.page2=1,1==this.indexId1&&this.$nextTick(function(){t.squareList({size:"5",page:1},!0),t.gethottalk()})},methods:{send:function(){if(!uni.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;this.getnav("/pages/squareSon/Release")},save:function(t){var i=this;if(!uni.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;var a=1===this.indexId1?"squareLiData":"fxListDate",n=1===this[a][t].download,s=this[a][t].imgurl;this.$loading("正在下载中"),s.forEach(function(o,c){if("gif"===o.substr(-3).toLocaleLowerCase())return i.$toast("gif动态暂时无法下载"),i.$hideLoading(),!1;plus.gallery.save(o,function(){c===s.length-1&&(i.$toast("下载完成"),i.$http.downloadpic({fid:i[a][t].id}).then(function(e){200===e.status&&(n||i[a].map(function(n){return n.id===i[a][t].id&&(n.download=n.download+1,n.is_download=n.is_download+1),n}))}).catch(function(t){console.log((0,e.default)(t))})),console.log("save success")},function(){i.$toast("保存失败")}),i.$hideLoading()})},like:function(t,i){var a=this;if(!uni.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;var n=1===this.indexId1?"squareLiData":"fxListDate";this.$http.like({fid:t}).then(function(i){200==i.status&&(a.$toast(i.mess),"点赞成功"===i.mess?a[n].map(function(i){return i.id===t&&(i.is_laud=1,i.laudcount=i.laudcount+1),i}):"取消点赞"===i.mess&&a[n].map(function(i){return i.id===t&&(i.is_laud=0,i.laudcount=i.laudcount-1),i}))})},onShare:function(t,i){var a=this;if(!uni.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;var n=1===this.indexId1?"squareLiData":"fxListDate",e=this[n][i];this.$utils.share({summary:e.describe,href:"https://nycs.maitexun.cn/index/apppage/find?id=".concat(t),title:"欢迎体验WoSmart",callBack:function(){a.$http.sharewxpy({fid:t}).then(function(i){200===i.status&&a[n].map(function(i){return i.id===t&&1!==i.is_share&&(i.sharecount=i.sharecount+1,i.is_share=1),i})})}})},clickFollow:function(t){var i=this;if(!uni.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;this.$http.getfollow({mid:t}).then(function(a){200==a.status&&(i.$toast(a.mess),"关注成功"===a.mess?i.squareLiData.map(function(i){return i.mid===t&&(i.is_follow=1),i}):"取消关注"===a.mess&&i.squareLiData.map(function(i){return i.mid===t&&(i.is_follow=0),i}))})},tabActive:function(t){if(2===t&&!uni.getStorageSync("token"))return this.getnav("/pages/loginSon/login"),!1;this.indexId1=t,1==this.indexId1&&(s.page=this.page1,this.squareList(s)),2==this.indexId1&&(s.type=1,s.page=this.page2,this.squareList(s))},squareList:function(t,i){var a=this;2==this.indexId1?t.type=1:t.type="",(1==this.page1&&1==this.indexId1||1==this.page2&&2==this.indexId1)&&this.$loading(),this.$http.getsquareList(t).then(function(t){if(200===t.status){if(a.$hideLoading(),i)return a.squareLiData=t.data.data,a.loadingType1=0,!1;if(0==t.data.data.length&&1==a.indexId1)return a.loadingType1=2,!1;if(0==t.data.data.length&&2==a.indexId1)return a.loadingType2=2,!1;1==a.indexId1&&(a.squareLiData=a.squareLiData.concat(t.data.data),a.loadingType1=0),2==a.indexId1&&(a.fxListDate=a.fxListDate.concat(t.data.data),a.loadingType2=0)}}).catch(function(){})},loadMoreFunc:function(){var t=this;if(1==this.indexId1){if(1==this.loadingType1||2==this.loadingType1)return!1;this.loadingType1=1,++this.page1,s.page=this.page1}if(2==this.indexId1){if(1==this.loadingType2||2==this.loadingType2)return!1;this.loadingType2=1,++this.page2,s.page=this.page2}this.$nextTick(function(){t.squareList(s)})},preview:function(t,i){uni.previewImage({current:i,indicator:"number",urls:t})},gethottalk:function(){var t=this;this.$http.gethottalk().then(function(i){uni.stopPullDownRefresh(),200==i.status&&(t.hottalk=i.data.data)}).catch(function(){uni.stopPullDownRefresh()})}},onNavigationBarButtonTap:function(t){this.getnav("/pages/squareSon/Release")}};i.default=o},b050d:function(t,i,a){"use strict";var n,e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"index_class"},[a("v-uni-view",{staticClass:"conversation"},[a("v-uni-view",{staticClass:"con-title",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getnav("/pages/squareSon/Popular")}}},[a("v-uni-view",[a("v-uni-image",{attrs:{src:"../../static/images/img/title_fx.png"}}),t._v("热门话题")],1),a("i",{staticClass:"iconfont icon_e60c"})],1),a("v-uni-view",{staticClass:"img-scoll"},[a("v-uni-scroll-view",{staticClass:"scroll-view_H",attrs:{"scroll-x":"true"}},t._l(t.hottalk,function(i,n){return a("v-uni-view",{key:n,staticClass:"scroll-view-item_H uni-bg-red",attrs:{id:"demo1","hover-class":"item-active-hover"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getnav("/pages/squareSon/Catcher?mid="+i.mid)}}},[a("v-uni-text",{staticClass:"img-text"},[t._v(t._s(i.title))]),a("v-uni-image",{staticClass:"scoll-items",attrs:{src:i.pathurl}})],1)}),1)],1),a("v-uni-view",{staticClass:"segement"},[a("v-uni-view",{staticClass:"seg-tab"},[a("v-uni-view",{class:{active:1==t.indexId1},attrs:{"hover-class":"item-active-hover"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tabActive(1)}}},[t._v("推荐")]),a("v-uni-view",{class:{active:2==t.indexId1},attrs:{"hover-class":"item-active-hover"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tabActive(2)}}},[t._v("关注")])],1),1==t.indexId1?a("v-uni-view",{staticClass:"seg-tab-nav"},[t._l(t.squareLiData,function(i,n){return a("v-uni-view",{key:n,staticClass:"seg-mend"},[a("v-uni-view",{staticClass:"seg-top"},[a("v-uni-view",{staticClass:"seg-left"},[a("v-uni-image",{attrs:{src:i.headimgurl}}),a("v-uni-view",[a("v-uni-text",[t._v(t._s(i.user_name))]),a("v-uni-text",{staticClass:"datatime"},[t._v(t._s(i.createtime))])],1)],1),a("v-uni-view",{staticClass:"follow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clickFollow(i.mid)}}},[t._v(t._s(1===i.is_follow?"已关注":"关注"))])],1),a("v-uni-view",{staticClass:"seg-text"},[t._v(t._s(i.describe))]),a("v-uni-view",{staticClass:"seg-img"},t._l(i.imgurl,function(n,e){return a("v-uni-image",{key:e,staticClass:"scoll-items",attrs:{src:n},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.preview(i.imgurl,n)}}})}),1),a("v-uni-view",{staticClass:"seg-bottom",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getnav("/pages/homeSon/shop_details?id="+i.gid)}}},[a("v-uni-image",{staticClass:"scoll-items",attrs:{src:i.thumb_url}}),a("v-uni-text",[t._v(t._s(i.goods_name))])],1),a("v-uni-view",{staticClass:"download"},[a("v-uni-view",{staticClass:"download-item",class:{"download-active":1===i.is_laud},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.like(i.id)}}},[a("i",{staticClass:"iconfont icon_e66f",staticStyle:{"margin-right":"8upx"}}),t._v(t._s(i.laudcount))]),a("v-uni-view",{staticClass:"download-item",class:{"download-active":1===i.is_download},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.save(n)}}},[a("i",{staticClass:"iconfont icon_e680",staticStyle:{"margin-right":"8upx"}}),t._v(t._s(i.download))]),a("v-uni-view",{staticClass:"download-item",class:{"download-active":1===i.is_share},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onShare(i.id,n)}}},[a("i",{staticClass:"iconfont icon_e66b",staticStyle:{"margin-right":"8upx"}}),t._v(t._s(i.sharecount))])],1)],1)}),a("loadMore",{attrs:{loadingType:t.loadingType1}})],2):t._e(),2==t.indexId1?a("v-uni-view",{staticClass:"seg-tab-nav"},[t._l(t.fxListDate,function(i,n){return a("v-uni-view",{key:n,staticClass:"seg-mend"},[a("v-uni-view",{staticClass:"seg-top"},[a("v-uni-view",{staticClass:"seg-left"},[a("v-uni-image",{attrs:{src:i.headimgurl}}),a("v-uni-view",[a("v-uni-text",[t._v(t._s(i.user_name))]),a("v-uni-text",{staticClass:"datatime"},[t._v(t._s(i.createtime))])],1)],1),a("v-uni-view",{class:!0})],1),a("v-uni-view",{staticClass:"seg-text"},[t._v(t._s(i.describe))]),a("v-uni-view",{staticClass:"seg-img"},t._l(i.imgurl,function(n,e){return a("v-uni-image",{key:e,staticClass:"scoll-items",attrs:{src:n},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.preview(i.imgurl,n)}}})}),1),a("v-uni-view",{staticClass:"seg-bottom",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getnav("/pages/homeSon/shop_details?id="+i.gid)}}},[a("v-uni-image",{staticClass:"scoll-items",attrs:{src:i.thumb_url}}),a("v-uni-text",[t._v(t._s(i.goods_name))])],1),a("v-uni-view",{staticClass:"download"},[a("v-uni-view",{staticClass:"download-item",class:{"download-active":1===i.is_laud},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.like(i.id,1)}}},[a("i",{staticClass:"iconfont icon_e66f",staticStyle:{"margin-right":"8upx"}}),t._v(t._s(i.laudcount))]),a("v-uni-view",{staticClass:"download-item",class:{"download-active":1===i.download},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.save(n)}}},[a("i",{staticClass:"iconfont icon_e680",staticStyle:{"margin-right":"8upx"}}),t._v(t._s(i.download))]),a("v-uni-view",{staticClass:"download-item",class:{"download-active":1===i.is_share},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onShare(i.id,n)}}},[a("i",{staticClass:"iconfont icon_e66b",staticStyle:{"margin-right":"8upx"}}),t._v(t._s(i.sharecount))])],1)],1)}),a("loadMore",{attrs:{loadingType:t.loadingType2}})],2):t._e()],1)],1)],1)},s=[];a.d(i,"b",function(){return e}),a.d(i,"c",function(){return s}),a.d(i,"a",function(){return n})},c10a:function(t,i,a){"use strict";a.r(i);var n=a("7997"),e=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(i,t,function(){return n[t]})}(s);i["default"]=e.a},d151:function(t,i,a){"use strict";var n=a("169f"),e=a.n(n);e.a}}]);