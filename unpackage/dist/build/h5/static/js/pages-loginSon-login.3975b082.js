(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-loginSon-login"],{"20fde":function(t,e,n){"use strict";n.r(e);var i=n("eb73"),s=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=s.a},5414:function(t,e,n){"use strict";n.r(e);var i=n("6382"),s=n("20fde");for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);var a,c=n("f0c5"),l=Object(c["a"])(s["default"],i["b"],i["c"],!1,null,"f8371296",null,!1,i["a"],a);e["default"]=l.exports},6382:function(t,e,n){"use strict";var i,s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"index_class"},[n("v-uni-view",{staticClass:"login_cont"},[n("v-uni-view",{staticClass:"login_tab"},[n("v-uni-view",{class:{"active-t":1==t.indexId1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.indexId1=1}}},[t._v("短信登陆")]),n("v-uni-view",{class:{"active-t":2==t.indexId1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.indexId1=2}}},[t._v("密码登陆")])],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1==t.indexId1,expression:"indexId1==1"}]},[n("v-uni-view",{staticClass:"login_form"},[n("v-uni-view",{staticClass:"form_items"},[n("v-uni-view",{staticClass:"items_left"},[n("i",{staticClass:"iconfont icon_e62a"}),t._v("手机号")]),n("v-uni-input",{staticClass:"items_input",attrs:{placeholder:"请输入手机号",type:"number",maxlength:"11"},model:{value:t.codetel,callback:function(e){t.codetel=e},expression:"codetel"}})],1),n("v-uni-view",{staticClass:"form_items"},[n("v-uni-view",{staticClass:"items_left"},[n("i",{staticClass:"iconfont icon_eb16"}),t._v("验证码")]),n("v-uni-input",{staticClass:"items_input",attrs:{placeholder:"请输入验证码",type:"text",maxlength:"6"},model:{value:t.dxcode,callback:function(e){t.dxcode=e},expression:"dxcode"}}),n("v-uni-view",{staticClass:"in_code",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getcode.apply(void 0,arguments)}}},[t._v(t._s(t.coun))])],1),n("v-uni-view",{staticClass:"Sure"},[n("v-uni-view",{staticClass:"land",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login.apply(void 0,arguments)}}},[t._v("登陆")]),n("v-uni-view",{staticClass:"reg"},[n("v-uni-text"),n("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getnav("/pages/loginSon/register")}}},[t._v("免费注册")])],1)],1)],1)],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==t.indexId1,expression:"indexId1==2"}]},[n("v-uni-view",{staticClass:"login_form"},[n("v-uni-view",{staticClass:"form_items"},[n("v-uni-view",{staticClass:"items_left"},[n("i",{staticClass:"iconfont icon_e62a"}),t._v("手机号")]),n("v-uni-input",{staticClass:"items_input",attrs:{placeholder:"请输入手机号",type:"number",maxlength:"11"},model:{value:t.pwdtel,callback:function(e){t.pwdtel=e},expression:"pwdtel"}})],1),n("v-uni-view",{staticClass:"form_items"},[n("v-uni-view",{staticClass:"items_left"},[n("i",{staticClass:"iconfont icon_e84a"}),t._v("密码")]),n("v-uni-input",{staticClass:"items_input",attrs:{placeholder:"请输入密码",type:"password",maxlength:"18"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-uni-view",{staticClass:"Sure"},[n("v-uni-view",{staticClass:"land",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login.apply(void 0,arguments)}}},[t._v("登陆")]),n("v-uni-view",{staticClass:"reg"},[n("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getnav("/pages/loginSon/Retrieve")}}},[t._v("找回密码")]),n("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getnav("/pages/loginSon/register")}}},[t._v("免费注册")])],1)],1)],1)],1)],1)],1)},o=[];n.d(e,"b",function(){return s}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return i})},eb73:function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(n("f499")),o=n("ae2f"),a=60,c={data:function(){return{indexId1:1,codetel:"",dxcode:"",coun:"获取验证码",pwdtel:"",password:"",providerList:[]}},onLoad:function(t){var e=this;uni.getProvider({service:"oauth",success:function(t){e.providerList=t.provider.map(function(t){var e="";switch(t){case"weixin":e="微信登录";break;case"qq":e="QQ登录";break;case"sinaweibo":e="新浪微博登录";break;case"xiaomi":e="小米登录";break;case"baidu":e="百度登录";break;case"alipay":e="支付宝登录";break}return{name:e,id:t}})},fail:function(t){console.log("获取登录通道失败",t)}})},methods:{login:function(){var t=this;if(this.$loading(),1==this.indexId1){if(this.codetel.length<11)return this.$toast("请输入正确的手机号"),!1;if(""==this.dxcode)return this.$toast("请输入短信验证码"),!1;this.$http.getduanxindenglu({phone:this.codetel,phonecode:this.dxcode}).then(function(e){200==e.status&&(t.$toast(e.mess),uni.setStorageSync("token",e.data.token),setTimeout(function(){o.connectSocket({success:function(){console.log("连接成功")}}),uni.switchTab({url:"/pages/tabBar/Home"})},1500))})}else{if(this.pwdtel.length<11)return this.$toast("请输入正确的手机号"),!1;if(""==this.password)return this.$toast("请输入登陆密码"),!1;this.$http.getpwddenglu({phone:this.pwdtel,password:this.password}).then(function(e){200==e.status&&(t.$toast(e.mess),uni.setStorageSync("token",e.data.token),setTimeout(function(){o.connectSocket({success:function(){console.log("连接成功")}}),uni.switchTab({url:"/pages/tabBar/Home"})},1500))})}},getcode:function(){var t=this;if(this.codetel.length<11)return this.$toast("请输入正确的手机号"),!1;this.$loading(),this.$http.getLoginCode({phone:this.codetel}).then(function(e){if(200==e.status){t.$toast(e.mess);var n=setInterval(function(e){if(--a,0==a)return t.coun="重新获取",clearInterval(n),!1;t.coun=a+"s"},1e3)}})},wxLogin:function(){var t=this;console.log(this.providerList[0].id),uni.login({provider:"weixin",success:function(e){uni.getUserInfo({provider:"weixin",success:function(e){console.log((0,s.default)(e)),t.$loading(),t.$http.getsfdenglu({oauth:"weixin",openid:e.userInfo.openId,nick_name:e.userInfo.nickName,iconurl:e.userInfo.avatarUrl,uniongender:e.userInfo.gender}).then(function(e){200==e.status?(t.$toast(e.mess),uni.setStorageSync("token",e.data.token),setTimeout(function(){o.connectSocket({success:function(){console.log("连接成功")}}),uni.switchTab({url:"/pages/tabBar/Home"})},1e3)):console.log((0,s.default)(e))}).catch(function(t){console.log((0,s.default)(t))})}})},fail:function(t){console.log("login fail:",t)}})}}};e.default=c}}]);